CREATE TABLE t1(x VARCHAR(1000));
INSERT INTO t1 VALUES (REPEAT("xyz", 100));
INSERT INTO t1 SELECT t1.* FROM t1, t1 t12, t1 t13, t1 t14;
INSERT INTO t1 SELECT t1.* FROM t1, t1 t12, t1 t13, t1 t14;
INSERT INTO t1 SELECT t1.* FROM t1, t1 t12, t1 t13, t1 t14;
SELECT * FROM t1 INTO OUTFILE 'OUTPUT_FILE';;
SELECT * FROM t1 INTO OUTFILE 'OUTPUT_FILE' COMPRESSED;;
TRUNCATE TABLE t1;
LOAD DATA INFILE 'INPUT_FILE' INTO TABLE t1;;
SELECT * FROM t1 INTO OUTFILE 'OUTPUT_FILE2' COMPRESSED(0);;
TRUNCATE TABLE t1;
SELECT * FROM t1 INTO OUTFILE 'OUTPUT_FILE3' COMPRESSED;;
0
CREATE TABLE t10(x varchar(5001));
LOAD DATA INFILE 'INPUT_FILE_BIG_ROW' INTO TABLE t10;;
SELECT * FROM t10 INTO OUTFILE 'OUTPUT_FILE_BIG_ROW' COMPRESSED;;
set @saved_load_data_infile_buffer_size = @@session.load_data_infile_buffer_size;
set load_data_infile_buffer_size = 67108864;
set @saved_select_into_buffer_size  = @@session.select_into_buffer_size;
set select_into_buffer_size = 67108864;
CREATE TABLE t11(x varchar(5001));
LOAD DATA INFILE 'INPUT_FILE_BIG_ROW' INTO TABLE t11;;
SELECT * FROM t11 INTO OUTFILE 'OUTPUT_FILE_BIG_ROW' COMPRESSED;;
set select_into_buffer_size = @saved_select_into_buffer_size;
set load_data_infile_buffer_size = @saved_load_data_infile_buffer_size;
set @saved_select_into_file_fsync_size = @@session.select_into_file_fsync_size;
set @@session.select_into_file_fsync_size = 67108864;
SELECT 1 INTO OUTFILE 'OUTPUT_FILE4';;
SELECT 1 INTO OUTFILE 'OUTPUT_FILE4' COMPRESSED;;
set @@session.select_into_file_fsync_size = @saved_select_into_file_fsync_size;
DROP TABLE t1, t10, t11;
